#!/usr/bin/env python

from zensols.cli import CliHarness


if (__name__ == '__main__'):
    import zensols.deepnlp.transformer as dnt
    dnt.normalize_huggingface_logging()
    dnt.turn_off_huggingface_downloads()
    args: str = ''
    model = {
        0: None,
        1: 'parse-xfm-base-lp',
        2: 'parse-t5-lp',
        3: 'parse-spring-lp',
        4: 'generate-t5wtense-lp',
    }[1]
    if model is not None:
        args = f' -c example/train/{model}.conf'
    harness = CliHarness(
        src_dir_name='src/python',
        app_factory_class='zensols.amr.ApplicationFactory',
        proto_args='proto' + args,
        proto_factory_kwargs={'reload_pattern': r'^zensols\.amr\.(?!annotate)'}
    )
    harness.run()
